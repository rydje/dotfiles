(ns tutorial.watchers)

(defn watch
  []
  (let [x (atom 5)]
    (add-watch x :x-watcher
               (fn [key atom old-state new-state]
                 (println key)
                 (println atom)
                 (println old-state)
                 (println new-state)
                 ))
    (println "popopo")
    (reset! x 10)
    (remove-watch x :x-watcher)
    (reset! x 15)
    )
  )
(watch)
